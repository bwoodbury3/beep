"""
Generates a beep from hacky sheet music.

Desired format:

song = {
    "tempo": 120,
    "tracks": {
        "track1": {
            "chords": [
                (1/2,   ("C4",)),
                (1/2,   ("D4",)),
                (1/2,   ("E4",)),
                (1/2,   ("F4",)),
                (1/2,   ("G4",)),
                (1/2,   ("F4",)),
                (1/2,   ("E4",)),
                (1/2,   ("D4",)),
                (1/2,   ("C4",)),
            ]
        }
    }
}
"""

from composer import Composer, repeat

song = {
    "tempo": 300,
    "tracks": {
        "track1": {
            "chords": [
                # Intro.
                (1/2, "E5"),
                (1/2, "E5"),
                (1/2, "REST"),
                (1/2, "E5"),
                (1/2, "REST"),
                (1/2, "C5"),
                (1/2, "E5"),
                (1/2, "REST"),
                (1/2, "G5"),
                (3/2, "REST"),
                (1/2, "G4"),
                (3/2, "REST"),

                # Main.
                *repeat([
                    (1/2, "C5"),
                    (1, "REST"),
                    (1/2, "G4"),
                    (1, "REST"),
                    (1/2, "E4"),
                    (1, "REST"),
                    (1, "A4"),
                    (1, "B4"),
                    (1/2, "Bb4"),
                    (1, "A4"),

                    (2/3, "G4"),
                    (2/3, "E5"),
                    (2/3, "G5"),
                    (1, "A5"),
                    (1/2, "F5"),
                    (1/2, "G5"),
                    (1/2, "REST"),
                    (1, "E5"),
                    (1/2, "C5"),
                    (1/2, "D5"),
                    (1/2, "B4"),
                    (1, "REST"),
                ], 2),

                # Verse.
                *repeat([
                    (1, "C3"), # bass
                    (1/2, "G5"),
                    (1/2, "F#5"),
                    (1/2, "F5"),
                    (1/2, "D5"),
                    (1/2, "G3"), # bass
                    (1/2, "E5"),

                    (1/2, "C4"), # bass
                    (1/2, "G#4"),
                    (1/2, "A4"),
                    (1/2, "C5"),
                    (1/2, "C4"), # bass
                    (1/2, "A4"),
                    (1/2, "C5"),
                    (1/2, "D5"),

                    (1, "C3"), # bass
                    (1/2, "G5"),
                    (1/2, "F#5"),
                    (1/2, "F5"),
                    (1/2, "D5"),
                    (1/2, "G3"), # bass
                    (1/2, "E5"),

                    (1/2, "REST"),
                    (1/2, "C6"),
                    (1/2, "REST"),
                    (1/2, "C6"),
                    (1/2, "C6"),
                    (1, "REST"),

                    (1, "C3"), # bass
                    (1/2, "G5"),
                    (1/2, "F#5"),
                    (1/2, "F5"),
                    (1/2, "D5"),
                    (1/2, "G3"), # bass
                    (1/2, "E5"),

                    (1/2, "C4"), # bass
                    (1/2, "G#4"),
                    (1/2, "A4"),
                    (1/2, "C5"),
                    (1/2, "C4"), # bass
                    (1/2, "A4"),
                    (1/2, "C5"),
                    (1/2, "D5"),

                    (1, "C4"), # bass
                    (1/2, "Eb5"),
                    (1, "REST"),
                    (1/2, "D5"),
                    (1, "REST"),

                    (1/2, "C5"),
                    (1, "REST"),
                    (1/2, "G4"), # bass
                    (1, "G4"), # bass
                    (1, "C4"), # bass
                ], 2)
            ]
        }
    }
}

c = Composer(song)
c.play_all()